# DeferredTaskLaunch

![Java](https://img.shields.io/badge/Java-17%2B-blue)
![JDBC](https://img.shields.io/badge/JDBC-MySQL-blue)
![HikariCP](https://img.shields.io/badge/Connection%20Pool-HikariCP-brightgreen)
![Multi-threading](https://img.shields.io/badge/Concurrent-Multi--threaded-orange)

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π MySQL –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

- **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MySQL** —á–µ—Ä–µ–∑ JDBC
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –≤–æ—Ä–∫–µ—Ä–∞–º–∏ –∏ –∑–∞–¥–∞—á–∞–º–∏
- **–ì–∏–±–∫–∏–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–≤—Ç–æ—Ä–∞** —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π CLI** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–æ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** –≤–æ—Ä–∫–µ—Ä–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Java 17+
- MySQL 8.0+
- Maven 3.6+

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:
   ```sql
   CREATE DATABASE task_launcher;
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ DatabaseConnection.java:

java
config.setJdbcUrl("jdbc:mysql://localhost:3306/task_launcher");
config.setUsername("your_username");
config.setPassword("your_password");
–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
bash
mvn clean package
java -jar target/DeferredTaskLaunch.jar
üõ† –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
–ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã
–ö–ª–∞—Å—Å	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Main	–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
DatabaseConnection	–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ MySQL
TaskManagerImpl	–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏
WorkerManagerImpl	–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É–ª–∞–º–∏ –ø–æ—Ç–æ–∫–æ–≤
–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
java
// –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –ø–æ–≤—Ç–æ—Ä–æ–º
long taskId = taskManager.schedule(
    "notifications",
    EmailNotificationTask.class,
    new TaskParams("{\"email\":\"user@example.com\"}", 3, true, 2.0, 15000),
    LocalDateTime.now().plusMinutes(30)
);
üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CLI
–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
text
=== –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ===
1. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
   - –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
   - –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
   - –û—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á–∏
2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞–º–∏
   - –î–æ–±–∞–≤–∏—Ç—å –≤–æ—Ä–∫–µ—Ä
   - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–æ—Ä–∫–µ—Ä
   - –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö
3. –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á
   - –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
   - –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã
bash
–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é:
1. notifications
2. payments
–í–≤–µ–¥–∏—Ç–µ ID –∑–∞–¥–∞—á–∏: 42

=== –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏ ===
ID:           42
–¢–∏–ø:          EmailNotificationTask
–°—Ç–∞—Ç—É—Å:       PENDING
–°–æ–∑–¥–∞–Ω–∞:      2023-05-15 14:30
–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ: 2023-05-15 15:00
‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
–ü–æ–ª–∏—Ç–∏–∫–∏ –ø–æ–≤—Ç–æ—Ä–∞
java
// –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
new RetryPolicyParam(
    true,     // –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
    5,        // –ú–∞–∫—Å. –ø–æ–ø—ã—Ç–æ–∫
    2.5,      // –ë–∞–∑–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å
    30000     // –ú–∞–∫—Å. –∑–∞–¥–µ—Ä–∂–∫–∞ (–º—Å)
)
–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sql
CREATE TABLE deferred_<category> (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    task_class VARCHAR(255) NOT NULL,
    params TEXT NOT NULL,
    status ENUM('PENDING','PROCESSING','COMPLETED','FAILED','CANCELLED'),
    scheduled_time TIMESTAMP NOT NULL,
    next_attempt_time TIMESTAMP,
    max_attempts INT DEFAULT 1,
    attempt_count INT DEFAULT 0
);
üìå –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
–î–ª—è –∑–∞–¥–∞—á —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π —É–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:

java
config.setMaximumPoolSize(20);
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∑–∞–¥–∞—á

–î–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ LongRunningTask –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

üìù –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License. –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ñ–∞–π–ª–µ LICENSE.

